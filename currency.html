<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Currency Converter</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #f0f4f8; text-align: center; padding: 20px; }
    header { background: #0a74da; color: #fff; padding: 20px 0; }
    .converter { background: #fff; padding: 30px; max-width: 500px; margin: 40px auto; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
    select, input, button { padding: 12px; margin: 10px 0; width: 85%; border-radius: 6px; border: 1px solid #ccc; font-size: 16px; }
    button { background: #0a74da; color: #fff; border: none; cursor: pointer; }
    button:hover { background: #094a9c; }
    footer { margin-top: 40px; color: #777; }
  </style>
</head>
<body>

<header>
  <h1>Currency Converter</h1>
</header>

<div class="converter">
  <input type="number" id="currencyInput" placeholder="Enter amount">

  <select id="currencyFrom"></select>
  <select id="currencyTo"></select>

  <button onclick="convertCurrency()">Convert</button>

  <p id="currencyResult"></p>
</div>

<footer>
  <p><a href="index.html">Back to Home</a></p>
</footer>

<script>
const apiKey = "688e2bb03ee7b2fe67c9fc5b";

// Load currency list dynamically
async function loadCurrencies() {
  try {
    const response = await fetch(`https://open.er-api.com/v6/latest/USD`);
    const data = await response.json();
    const currencies = Object.keys(data.rates);

    const fromSelect = document.getElementById("currencyFrom");
    const toSelect = document.getElementById("currencyTo");

    currencies.forEach(curr => {
      let option1 = document.createElement("option");
      option1.value = curr;
      option1.text = curr;
      fromSelect.appendChild(option1);

      let option2 = document.createElement("option");
      option2.value = curr;
      option2.text = curr;
      toSelect.appendChild(option2);
    });

    fromSelect.value = "USD";
    toSelect.value = "INR";

  } catch (error) {
    console.error("Error loading currencies:", error);
  }
}

async function convertCurrency() {
  let amount = parseFloat(document.getElementById("currencyInput").value);
  let from = document.getElementById("currencyFrom").value;
  let to = document.getElementById("currencyTo").value;

  if (isNaN(amount)) {
    document.getElementById("currencyResult").innerText = "Please enter a valid amount.";
    return;
  }

  try {
    const response = await fetch(`https://open.er-api.com/v6/latest/${from}`);
    const data = await response.json();
    const rate = data.rates[to];
    const result = amount * rate;

    document.getElementById("currencyResult").innerText = 
      `Result: ${result.toFixed(2)} ${to}`;
  } catch (error) {
    document.getElementById("currencyResult").innerText = "Error fetching rates.";
  }
}

// Load currency options on page load
window.onload = loadCurrencies;
</script>

</body>
</html>